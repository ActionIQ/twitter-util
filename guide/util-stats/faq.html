
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>FAQ &#8212; Util 20.8.0 documentation</title>
    <link rel="stylesheet" href="../_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '20.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Util Cookbook" href="../util-cookbook/index.html" />
    <link rel="prev" title="User Guide" href="user_guide.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="../_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-4', 'twitter.github.io');
    ga('send', 'pageview');

  </script>

  </head>
  <body>
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../util-cookbook/index.html" title="Util Cookbook"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="user_guide.html" title="User Guide"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Util</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">util-stats Guide</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="faq">
<h1>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h1>
<div class="section" id="why-are-util-stats-in-the-com-twitter-finagle-stats-package">
<h2>Why are util-stats in the com.twitter.finagle.stats package?<a class="headerlink" href="#why-are-util-stats-in-the-com-twitter-finagle-stats-package" title="Permalink to this headline">¶</a></h2>
<p>This is a historical artifact that reflects how the code was
originally written as part of <a class="reference external" href="https://twitter.github.io/finagle/">Finagle</a>
but turned out to not actually depend on anything Finagle-specific.
The code was moved to <a class="reference external" href="https://twitter.github.io/util/">util</a>
in order to allow usage without depending on finagle-core.
To ease the transition, the package namespace was left as is.</p>
</div>
<div class="section" id="why-were-there-three-different-implementations">
<h2>Why were there three(!) different implementations?<a class="headerlink" href="#why-were-there-three-different-implementations" title="Permalink to this headline">¶</a></h2>
<p>This is somewhat historical, as early on in Twitter, Commons Stats
was created for Java developers and Ostrich was created for Scala developers.
Code initially was written directly to the implementations and there were
(and still are) some subtle differences in their behavior.
<code class="docutils literal"><span class="pre">StatsReceiver</span></code> was written in order to bridge the gap between the
two implementations. <cite>finagle-stats</cite> was written quite a bit later in order to
improve upon both of these implementations in terms of
allocation efficiency and histogram precision.</p>
</div>
<div class="section" id="why-is-nullstatsreceiver-being-used">
<h2>Why is <cite>NullStatsReceiver</cite> being used?<a class="headerlink" href="#why-is-nullstatsreceiver-being-used" title="Permalink to this headline">¶</a></h2>
<p><cite>NullStatsReceiver</cite> is used when no metrics implementation is found on the classpath.
The section on <a class="reference internal" href="user_guide.html#choosing-impl"><span class="std std-ref">choosing the stats implementation</span></a> covers how to
pick an implementation for your application. Twitter runs its production
services with <cite>finagle-stats</cite> and it is available on
<a class="reference external" href="https://github.com/twitter/finagle/tree/master/finagle-stats">Github</a>
and <a class="reference external" href="https://search.maven.org/#search%7Cga%7C1%7Cfinagle-stats">Maven Central</a>.</p>
</div>
<div class="section" id="why-migrate-to-finagle-stats">
<span id="why-finagle-stats"></span><h2>Why migrate to finagle-stats?<a class="headerlink" href="#why-migrate-to-finagle-stats" title="Permalink to this headline">¶</a></h2>
<p>The <cite>finagle-stats</cite> library is designed to replace the other two libraries
formerly supported by Twitter: Ostrich and Commons Stats. The comparison table below
illustrates the advantages of <cite>finagle-stats</cite> over the older libraries.</p>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="21%" />
<col width="14%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">Commons Stats</th>
<th class="head">Ostrich</th>
<th class="head">finagle-stats</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Allocations per <cite>Stat.add</cite></td>
<td>16 bytes</td>
<td>0 bytes</td>
<td>0 bytes</td>
</tr>
<tr class="row-odd"><td>Highest histogram resolution</td>
<td>p99</td>
<td>p9999</td>
<td>p9999</td>
</tr>
<tr class="row-even"><td>Sampling error</td>
<td>N/A</td>
<td>±5%</td>
<td>±0.5%</td>
</tr>
</tbody>
</table>
<p><cite>finagle-stats</cite> allows you to visualize and download the full details of <cite>Stat</cite>
histograms. This is available on the
<a class="reference external" href="https://twitter.github.io/twitter-server/Admin.html#admin-histograms">/admin/histogram</a>
admin page.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><a href="index.html"><h3>Util</h3></a>
<p>
  Miscellaneous Idiomatic Scala Utilities & Wrappers, by Twitter.
</p>

<h3>Useful Links</h3>
<ul>
  <li><a href="https://github.com/twitter/util">Util on GitHub</a></li>
  <li><a href="https://github.com/twitter/util/issues">Issue Tracker</a></li>
</ul>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">FAQ</a><ul>
<li><a class="reference internal" href="#why-are-util-stats-in-the-com-twitter-finagle-stats-package">Why are util-stats in the com.twitter.finagle.stats package?</a></li>
<li><a class="reference internal" href="#why-were-there-three-different-implementations">Why were there three(!) different implementations?</a></li>
<li><a class="reference internal" href="#why-is-nullstatsreceiver-being-used">Why is <cite>NullStatsReceiver</cite> being used?</a></li>
<li><a class="reference internal" href="#why-migrate-to-finagle-stats">Why migrate to finagle-stats?</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">util-stats Guide</a><ul>
      <li>Previous: <a href="user_guide.html" title="previous chapter">User Guide</a></li>
      <li>Next: <a href="../util-cookbook/index.html" title="next chapter">Util Cookbook</a></li>
  </ul></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Search the contents of this site.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">&copy; Copyright 2020 Twitter, Inc.</div>
  
  </body>
</html>